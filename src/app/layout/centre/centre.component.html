<div [@routerTransition]>
    <app-page-header [heading]="'Centre Details'"></app-page-header>
    <div *ngIf="centre">

        <form name="form" #f="ngForm" novalidate>

            <div class="row">            
                <div class="col-lg-8">
                    <div class="form-group alert alert-warning">
                        <label for="centreCodeInput" class="detail-label">Centre code</label>
                        <input [(ngModel)]="centre.centre_code" type="text" class="form-control" id="centreCodeInput" name="centreCodeInput" placeholder="Centre code"
                        required minlength="5" maxlength="50" pattern="^[a-zA-Z\s]*$" #centre_code="ngModel" [ngClass]="{ 'is-invalid': centre_code.invalid }" />
                        <div *ngIf="centre_code.invalid && (centre_code.dirty || centre_code.touched)" class="text-danger">
                            <div *ngIf="centre_code.errors.required">
                                <small>* Centre code is required</small>
                            </div>
                            <div *ngIf="centre_code.errors.minlength">
                                <small>* Centre code must be at least 5 characters</small>
                            </div>
                            <div *ngIf="centre_code.errors.maxlength">
                                <small>* Centre code must not exceed 50 characters</small>
                            </div>
                            <div *ngIf="centre_code.errors.pattern">
                                <small>* Centre code should only consist of letters</small>
                            </div>
                        </div>
                        <div>
                            <br/>
                            <i class="fas fa-exclamation-circle"></i>&nbsp;<small>This is used to uniquely identify your centre and MUST BE CORRECTLY PROVIDED by educators, parents and guardians, and administrators when logging in to the system. DO NOT change your centre's code unless it is completely necessary.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="centreNameInput" class="detail-label">Centre name</label>
                        <input [(ngModel)]="centre.name" type="text" class="form-control" id="centreNameInput" name="centreNameInput" placeholder="Centre's name"
                        required minlength="10" maxlength="100" pattern="^[a-zA-Z\s]*$" #name="ngModel" [ngClass]="{ 'is-invalid': name.invalid }" />
                        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-danger">
                            <div *ngIf="name.errors.required">
                                <small>* Centre name is required</small>
                            </div>
                            <div *ngIf="name.errors.minlength">
                                <small>* Centre name must be at least 10 characters</small>
                            </div>
                            <div *ngIf="name.errors.maxlength">
                                <small>* Centre name must not exceed 100 characters</small>
                            </div>
                            <div *ngIf="name.errors.pattern">
                                <small>* Centre name should only consist of letters</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="addressInput" class="detail-label">Address</label>                    
                        <textarea [(ngModel)]="centre.address" class="form-control" rows="2" id="addressInput" name="addressInput" placeholder="Centre's address"
                        required minlength="10" maxlength="100" #address="ngModel" [ngClass]="{ 'is-invalid': address.invalid }">
                        </textarea>
                        <div *ngIf="address.invalid && (address.dirty || address.touched)" class="text-danger">
                            <div *ngIf="address.errors.required">
                                <small>* Address is required</small>
                            </div>
                            <div *ngIf="address.errors.minlength">
                                <small>* Address must be at least 10 characters</small>
                            </div>
                            <div *ngIf="address.errors.maxlength">
                                <small>* Address must not exceed 150 characters</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contactNameInput" class="detail-label">Contact person</label>
                        <input [(ngModel)]="centre.contact_name" type="text" class="form-control" id="contactNameInput" name="contactNameInput" placeholder="Centre's contact person"
                        required maxlength="100" pattern="^[a-zA-Z\s]*$" #contact_name="ngModel" [ngClass]="{ 'is-invalid': contact_name.invalid }" />
                        <div *ngIf="contact_name.invalid && (contact_name.dirty || contact_name.touched)" class="text-danger">
                            <div *ngIf="contact_name.errors.required">
                                <small>* Contact person is required</small>
                            </div>
                            <div *ngIf="contact_name.errors.minlength">
                                <small>* Contact person must be at least 5 characters</small>
                            </div>
                            <div *ngIf="contact_name.errors.maxlength">
                                <small>* Contact person must not exceed 100 characters</small>
                            </div>
                            <div *ngIf="contact_name.errors.pattern">
                                <small>* Contact person should only consist of letters</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="emailInput" class="detail-label">Email</label>
                        <input [(ngModel)]="centre.contact_email" type="email" class="form-control" id="emailInput" name="emailInput" placeholder="name@domain.com" 
                        required maxlength="50" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$" #email="ngModel" [ngClass]="{ 'is-invalid': email.invalid }" />
                        <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
                            <div *ngIf="email.errors.required">
                                <small>* Email is required</small>
                            </div>
                            <div *ngIf="email.errors.maxlength">
                                <small>* Email must not exceed 50 characters</small>
                            </div>
                            <div *ngIf="email.errors.pattern">
                                <small>* Email must be in valid format e.g. name@domain.com</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contactNumberInput" class="detail-label">Contact number</label>
                        <input [(ngModel)]="centre.contact_number" type="text" class="form-control" id="contactNumberInput" name="contactNumberInput" placeholder="0#########" 
                        required minlength="7" maxlength="20" #contact_number="ngModel" [ngClass]="{ 'is-invalid': contact_number.invalid }" />
                        <div *ngIf="contact_number.invalid && (contact_number.dirty || contact_number.touched)" class="text-danger">
                            <div *ngIf="contact_number.errors.required">
                                <small>* Contact number is required</small>
                            </div>
                            <div *ngIf="contact_number.errors.minlength">
                                <small>* Contact number must be at least 7 characters</small>
                            </div>
                            <div *ngIf="contact_number.errors.maxlength">
                                <small>* Contact number must not exceed 20 characters</small>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" (click)="showConfirm()" [disabled]="f.invalid">Save</button>
                </div>
            </div>

        </form>

    </div>
</div>
